(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[297],{63:(e,t,s)=>{"use strict";var n=s(7260);s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},1482:(e,t,s)=>{"use strict";s.d(t,{default:()=>j});var n=s(5155),l=s(5239),i=s(2115);function a(e){let[t,s]=(0,i.useState)(e.poster),a=[e.poster,...e.imgs];return(0,n.jsxs)("div",{className:"w-full h-fit grid grid-cols-1 grid-rows-[auto_auto] 550:grid-rows-[513px_133px] gap-y-5",children:[(0,n.jsx)("div",{className:"w-full h-fit 550:h-full flex items-center justify-center",children:a.map(e=>(0,n.jsx)(l.default,{src:"/api/cdn/".concat(e),alt:"poster",width:605,height:513,style:{aspectRatio:"605/513",display:t===e?"block":"none"},className:"w-full 550:w-auto h-auto 550:h-full object-contain object-center"},"main-".concat(e)))}),(0,n.jsx)("div",{className:"w-full h-full grid grid-rows-[1fr] grid-cols-3 550:auto-cols-max grid-flow-col justify-center gap-x-3",children:a.map(e=>(0,n.jsx)(l.default,{loading:"lazy",onClick:()=>{s(e)},src:"/api/cdn/".concat(e),alt:"poster",width:142,height:133,style:{aspectRatio:"142/133"},className:"cursor-pointer w-auto h-full max-h-[133px] object-contain object-center"},"thumb-".concat(e)))})]})}let r={src:"/_next/static/media/icon-checked.abfbae42.svg",height:14,width:14,blurWidth:0,blurHeight:0};function c(e){return(0,n.jsxs)("div",{className:"flex gap-2 items-center h-fit w-fit",children:[(0,n.jsx)(l.default,{src:r,width:14,height:14,alt:"icon-checked"}),(0,n.jsx)("p",{className:"text-sm font-normal leading-6 text-gray",children:e.text+" дверь"})]})}var o=s(6397);let d={src:"/_next/static/media/icon-mark.5b255967.svg",height:20,width:20,blurWidth:0,blurHeight:0};var u=s(2717);function x(e){return(0,n.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M5.83366 2.5C3.53283 2.5 1.66699 4.34667 1.66699 6.625C1.66699 8.46417 2.39616 12.8292 9.57366 17.2417C9.70223 17.3199 9.84983 17.3613 10.0003 17.3613C10.1508 17.3613 10.2984 17.3199 10.427 17.2417C17.6045 12.8292 18.3337 8.46417 18.3337 6.625C18.3337 4.34667 16.4678 2.5 14.167 2.5C11.8662 2.5 10.0003 5 10.0003 5C10.0003 5 8.13449 2.5 5.83366 2.5Z",stroke:e.favorite?"#4295E4":"#454F5B",fill:e.favorite?"#4295E4":"none",strokeLinecap:"round",strokeLinejoin:"round"})})}var m=s(9646);function h(e){let[t,s]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let t=m.t.db("favorites").find("ids");if(void 0===t)return void m.t.db("favorites").change("ids",[]);t.includes(e.pid)&&s(!0)},[]),(0,n.jsxs)("div",{onClick:function(){s(t=>{let s=m.t.db("favorites").find("ids");return!1===t?s.push(e.pid):s=s.filter(t=>t!==e.pid),m.t.db("favorites").change("ids",s),!t})},className:"w-fit h-fit py-[2px] flex items-center gap-2 cursor-pointer",children:[(0,n.jsx)(x,{favorite:t}),t?(0,n.jsx)("p",{className:"text-sm font-normal leading-6 text-main hidden 550:block",children:"В избранном"}):(0,n.jsx)("p",{className:"text-sm font-normal leading-6 text-gray hidden 550:block",children:"В избранное"})]})}function p(e){return(0,n.jsx)("svg",{className:"transition-all duration-[250ms] linear",style:{transform:"rotate(".concat(180*!!e.active,"deg)")},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M20 9L12 17L4 9",stroke:e.active?"#4295E4":"#454F5B",strokeLinecap:"round",strokeLinejoin:"round"})})}function f(e){let[t,s]=(0,i.useState)(!1),l=(0,i.useRef)(null),a=(0,i.useRef)(0);return(0,i.useEffect)(()=>{var e;a.current=(null==(e=l.current)?void 0:e.scrollHeight)||0},[l]),(0,n.jsxs)("div",{className:"w-full h-auto px-4 flex flex-col overflow-hidden",children:[(0,n.jsxs)("div",{onClick:()=>{s(e=>!e)},className:"w-full h-fit flex justify-between py-4 cursor-pointer",children:[(0,n.jsx)("p",{className:"font-medium leading-[26px]",children:e.title}),(0,n.jsx)(p,{active:t})]}),(0,n.jsx)("div",{ref:l,style:{maxHeight:"".concat(t?a.current:0,"px")},className:"w-full h-fit transition-all duration-[250ms] linear",children:e.children})]})}var g=s(4682);function j(e){let[t,s]=(0,i.useState)(e.product.colors[0].colorName),{cart:r,push:x}=(0,g.J)();return(0,i.useEffect)(()=>{let t=new Set(JSON.parse(m.t.db("recently_viewed").find("ids")||"[]"));t.add(e.product._id);let s=Array.from(t);m.t.db("recently_viewed").change("ids",JSON.stringify(s))},[]),(0,n.jsxs)("div",{className:"w-full mt-10 px-4 1230:px-25 grid grid-cols-1 930:grid-cols-2 gap-[30px]",children:[(0,n.jsx)(a,{poster:e.product.poster,imgs:e.product.imgs}),(0,n.jsxs)("div",{className:"w-full h-fit flex flex-col gap-3",children:[(0,n.jsxs)("div",{className:"w-full flex justify-between",children:[(0,n.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,n.jsx)("p",{className:"text-sm font-normal leading-[21px]",children:e.product.sku}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(o.A,{name:"rating",defaultValue:0!==e.product.rates?e.product.rating/e.product.rates:0,precision:.5,readOnly:!0}),(0,n.jsxs)("p",{className:"text-[13px] font-normal text-gray leading-[21px]",children:["(",e.product.reviewsCount,") отзывов"]})]})]}),(0,n.jsx)("div",{className:"block 930:hidden",children:(0,n.jsx)(h,{pid:e.product._id})})]}),(0,n.jsx)("p",{className:"mt-1 text-[22px] 550:text-2xl font-semibold leading-[30px]",children:e.product.name}),Array.isArray(e.product.mountOn)&&0!==e.product.mountOn.length?(0,n.jsxs)("div",{className:"flex flex-col gap-2 h-auto",children:[(0,n.jsx)("p",{className:"text-sm font-semibold leading-6",children:"Подходит для установки на:"}),(0,n.jsx)("div",{className:"w-full flex flex-wrap gap-3",children:e.product.mountOn.map((e,t)=>(0,n.jsx)(c,{text:e},"mountOnItem-".concat(t)))})]}):"",(0,n.jsxs)("div",{className:"w-full flex flex-col-reverse 550:flex-row gap-[30px]",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2 h-auto",children:[(0,n.jsx)("p",{className:"font-semibold leading-6",children:"Комплектация"}),(0,n.jsx)("div",{className:"w-72 h-10 flex flex-wrap items-center text-sm font-normal leading-6",children:e.product.equipment.join(", ")})]}),Array.isArray(e.product.colors)&&0!==e.product.colors.length?(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("p",{className:"font-semibold leading-6",children:"Цвет"}),(0,n.jsx)("div",{className:"w-fit max-w-full h-10 flex flex-wrap gap-3",children:e.product.colors.map(e=>(0,n.jsx)("div",{onClick:()=>{s(e.colorName)},className:"w-10 h-10 flex items-center justify-center cursor-pointer outline-".concat(t===e.colorName?"1":"0"," outline-main"),"data-value":e.colorName,style:{background:"".concat(e.hex)},children:(0,n.jsx)(l.default,{src:d,className:t===e.colorName?"":"hidden",alt:"icon-mark",width:20,height:20})},e.colorName))})]}):""]}),(0,n.jsx)("div",{className:"mt-3 flex items-center gap-3",children:0!==e.product.discount?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{className:"text-[22px] font-semibold h-fit",children:[e.product.price-e.product.price*(e.product.discount/100),"₽"]}),(0,n.jsxs)("p",{className:"text-xl font-light text-gray line-through h-fit",children:[e.product.price,"₽"]})]}):(0,n.jsxs)("p",{className:"text-[22px] font-semibold h-fit",children:[e.product.price,"₽"]})}),(0,n.jsxs)("div",{className:"mt-1 flex gap-[30px] items-center",children:[(0,n.jsx)(u.A,{onClick:function(){x({pid:e.product._id,color:t})},className:"px-[119px] py-4!",children:"Купить"}),(0,n.jsx)("div",{className:"hidden 930:block",children:(0,n.jsx)(h,{pid:e.product._id})})]}),(0,n.jsxs)("div",{className:"mt-5 flex flex-col",children:[(0,n.jsx)(f,{title:"Оплата",children:(0,n.jsx)("div",{className:"w-full h-auto text-sm font-normal text-gray leading-6",children:"Оплата при получении товара, Картой онлайн, Google Pay, Акционная оплата картой Visa, Безналичными для юридических лиц, Безналичными для физических лиц, Apple Pay, PrivatPay, Оплата картой в отделении."})}),(0,n.jsx)(f,{title:"Монтаж и доставка",children:(0,n.jsx)("div",{className:"w-full h-auto text-sm font-normal text-gray leading-6",children:"Бесплатная доставка от 3000 руб., Самовывоз из пунктов выдачи заказов (ПВЗ), Курьером по Москве и СПб, Доставка в пункты выдачи Boxberry, Доставка курьером CDEK, Доставка Почтой России, Срочная доставка по Москве (в день заказа), Профессиональный монтаж нашими мастерами, Консультация по самостоятельной установке."})}),(0,n.jsx)(f,{title:"Оплата",children:(0,n.jsx)("div",{className:"w-full h-auto text-sm font-normal text-gray leading-6",children:"Официальная гарантия от 1 года до 5 лет, Возврат и обмен в течение 14 дней, Скидки постоянным клиентам, Накопительная бонусная программа, Рассрочка без процентов (от Тинькофф, СберБанк), Цены от производителя, Только сертифицированные товары, Бесплатная консультация и подбор замка, Проверка на брак перед отправкой."})})]})]})]})}},4682:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var n=s(2115);let l=e=>{let t,s=new Set,n=(e,n)=>{let l="function"==typeof e?e(t):e;if(!Object.is(l,t)){let e=t;t=(null!=n?n:"object"!=typeof l||null===l)?l:Object.assign({},t,l),s.forEach(s=>s(t,e))}},l=()=>t,i={setState:n,getState:l,getInitialState:()=>a,subscribe:e=>(s.add(e),()=>s.delete(e))},a=t=e(n,l,i);return i},i=e=>{let t=(e=>e?l(e):l)(e),s=e=>(function(e,t=e=>e){let s=n.useSyncExternalStore(e.subscribe,n.useCallback(()=>t(e.getState()),[e,t]),n.useCallback(()=>t(e.getInitialState()),[e,t]));return n.useDebugValue(s),s})(t,e);return Object.assign(s,t),s};var a=s(9646);function r(e){a.t.db("cart").change("cart",e)}function c(e,t){let s;for(let n=0;n<e.length;n++)if(e[n].pid===t.pid&&e[n].color===t.color){s=n;break}return s}let o=(e=>e?i(e):i)(e=>({cart:a.t.db("cart").find("cart")||[],push:t=>e(e=>{let s,n=c(e.cart,t);return r(s=void 0!==n?e.cart.map((e,t)=>t===n?{...e,quantity:e.quantity+1}:e):[...e.cart,{...t,quantity:1}]),{cart:s}}),pull:t=>e(e=>{let s=c(e.cart,t);if(void 0===s)return e;let n=e.cart.map((e,t)=>s===t?{...e,quantity:e.quantity-1}:e).filter(e=>e.quantity>0);return r(n),{cart:n}}),remove:t=>e(e=>{let s=e.cart.filter(e=>e.pid!==t.pid&&e.color!==t.color);return r(s),{cart:s}})}))},5582:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,1356,23)),Promise.resolve().then(s.bind(s,1731)),Promise.resolve().then(s.bind(s,7944)),Promise.resolve().then(s.bind(s,1482)),Promise.resolve().then(s.bind(s,9740)),Promise.resolve().then(s.bind(s,8987))},6438:(e,t,s)=>{"use strict";s.d(t,{uh:()=>o});var n=s(2115);let l={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},i={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},a="mousemove",r="mouseup";function c(e,t){if(0===t)return e;let s=Math.PI/180*t;return[e[0]*Math.cos(s)+e[1]*Math.sin(s),e[1]*Math.cos(s)-e[0]*Math.sin(s)]}function o(e){var t,s,o;let d,{trackMouse:u}=e,x=n.useRef(Object.assign({},i)),m=n.useRef(Object.assign({},l)),h=n.useRef(Object.assign({},m.current));for(d in h.current=Object.assign({},m.current),m.current=Object.assign(Object.assign({},l),e),l)void 0===m.current[d]&&(m.current[d]=l[d]);let[p,f]=n.useMemo(()=>(function(e,t){let s=t=>{let s="touches"in t;s&&t.touches.length>1||e((e,l)=>{l.trackMouse&&!s&&(document.addEventListener(a,n),document.addEventListener(r,d));let{clientX:o,clientY:u}=s?t.touches[0]:t,x=c([o,u],l.rotationAngle);return l.onTouchStartOrOnMouseDown&&l.onTouchStartOrOnMouseDown({event:t}),Object.assign(Object.assign(Object.assign({},e),i),{initial:x.slice(),xy:x,start:t.timeStamp||0})})},n=t=>{e((e,s)=>{var n,i,a,r;let o="touches"in t;if(o&&t.touches.length>1)return e;if(t.timeStamp-e.start>s.swipeDuration)return e.swiping?Object.assign(Object.assign({},e),{swiping:!1}):e;let{clientX:d,clientY:u}=o?t.touches[0]:t,[x,m]=c([d,u],s.rotationAngle),h=x-e.xy[0],p=m-e.xy[1],f=Math.abs(h),g=Math.abs(p),j=(t.timeStamp||0)-e.start,v=Math.sqrt(f*f+g*g)/(j||1),w=[h/(j||1),p/(j||1)],b=(n=f,i=g,a=h,r=p,n>i?a>0?"Right":"Left":r>0?"Down":"Up"),N="number"==typeof s.delta?s.delta:s.delta[b.toLowerCase()]||l.delta;if(f<N&&g<N&&!e.swiping)return e;let y={absX:f,absY:g,deltaX:h,deltaY:p,dir:b,event:t,first:e.first,initial:e.initial,velocity:v,vxvy:w};y.first&&s.onSwipeStart&&s.onSwipeStart(y),s.onSwiping&&s.onSwiping(y);let O=!1;return(s.onSwiping||s.onSwiped||s[`onSwiped${b}`])&&(O=!0),O&&s.preventScrollOnSwipe&&s.trackTouch&&t.cancelable&&t.preventDefault(),Object.assign(Object.assign({},e),{first:!1,eventData:y,swiping:!0})})},o=t=>{e((e,s)=>{let n;if(e.swiping&&e.eventData){if(t.timeStamp-e.start<s.swipeDuration){n=Object.assign(Object.assign({},e.eventData),{event:t}),s.onSwiped&&s.onSwiped(n);let l=s[`onSwiped${n.dir}`];l&&l(n)}}else s.onTap&&s.onTap({event:t});return s.onTouchEndOrOnMouseUp&&s.onTouchEndOrOnMouseUp({event:t}),Object.assign(Object.assign(Object.assign({},e),i),{eventData:n})})},d=e=>{document.removeEventListener(a,n),document.removeEventListener(r,d),o(e)},u=(e,t)=>{let i=()=>{};if(e&&e.addEventListener){let a=Object.assign(Object.assign({},l.touchEventOptions),t.touchEventOptions),r=[["touchstart",s,a],["touchmove",n,Object.assign(Object.assign({},a),t.preventScrollOnSwipe?{passive:!1}:{})],["touchend",o,a]];r.forEach(([t,s,n])=>e.addEventListener(t,s,n)),i=()=>r.forEach(([t,s])=>e.removeEventListener(t,s))}return i},x={ref:t=>{null!==t&&e((e,s)=>{if(e.el===t)return e;let n={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),n.cleanUpTouch=void 0),s.trackTouch&&t&&(n.cleanUpTouch=u(t,s)),Object.assign(Object.assign(Object.assign({},e),{el:t}),n)})}};return t.trackMouse&&(x.onMouseDown=s),[x,u]})(e=>x.current=e(x.current,m.current),{trackMouse:u}),[u]);return t=x.current,s=m.current,o=h.current,x.current=s.trackTouch&&t.el?t.cleanUpTouch?s.preventScrollOnSwipe!==o.preventScrollOnSwipe||s.touchEventOptions.passive!==o.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:f(t.el,s)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:f(t.el,s)}):(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0})),p}},9740:(e,t,s)=>{"use strict";s.d(t,{default:()=>N});var n=s(5155),l=s(2115);function i(e){return(0,n.jsx)("div",{className:"w-full h-auto grid auto-rows-[auto] gap-x-[30px]\n			1500:grid-cols-3\n			600:grid-cols-2\n			grid-cols-1\n		".concat(e.className?" "+e.className:""),children:Object.keys(e.properties).map(t=>(0,n.jsxs)("div",{className:"w-full h-full px-3 py-4 grid grid-cols-[1fr_auto] gap-x-[30px] items-center",children:[(0,n.jsx)("p",{className:"text-sm 550:text-base font-medium leading-6 550:leading-[26px]",children:t}),(0,n.jsx)("p",{className:"text-xs 550:text-sm font-normal leading-5 550:leading-6 text-gray",children:e.properties[t]})]},t))})}var a=s(5239);function r(e){return(0,n.jsx)("h2",{className:"text-base 550:text-[32px] font-bold leading-[26px] 550:leading-[42px] mt-6",children:e.children})}function c(e){return(0,n.jsx)("h3",{className:"text-base 550:text-[28px] font-semibold leading-[30px] 550:leading-[35px] mt-4",children:e.children})}function o(e){return(0,n.jsx)("p",{className:"text-sm 550:text-lg font-normal leading-6 550:leading-[32px] mt-2",children:e.children})}function d(e){return(0,n.jsxs)("div",{className:"w-full h-auto grid grid-cols-1 930:grid-cols-[1fr_0.75fr] gap-x-[30px]".concat(e.className?" "+e.className:""),children:[(0,n.jsx)("div",{className:"flex flex-col h-auto justify-center order-2 930:order-1",children:e.description.map((e,t)=>{switch(e.type){case"title":return(0,n.jsx)(r,{children:e.content},t);case"subtitle":return(0,n.jsx)(c,{children:e.content},t);case"text":return(0,n.jsx)(o,{children:e.content},t)}})}),(0,n.jsx)(a.default,{src:"/api/cdn/".concat(e.img),alt:"product-poster",width:500,height:600,style:{aspectRatio:"500/600"},className:"w-auto 930:w-full h-auto object-contain object-center order-1 930:order-2"})]})}var u=s(2615),x=s(8067),m=s(6397),h=s(7219),p=s(2717),f=s(6999);let g={src:"/_next/static/media/icon-reply.0437014b.svg",height:20,width:20,blurWidth:0,blurHeight:0},j={src:"/_next/static/media/icon-comment.58f6f201.svg",height:20,width:20,blurWidth:0,blurHeight:0};function v(e){let[t,s]=(0,l.useState)(!1),[i,a]=(0,l.useState)(!1),r=(0,l.useRef)({name:null,comment:null});async function c(){function t(e){u.h.showError(e)}let s=r.current.name.value;if(!x.rj.isRussianText(s))return void t("Имя может содержать только русские буквы");if(!x.rj.isInLengthRange(s,3,32))return void t("Имя не может быть короче 3 символов и длиннее 32 символов");let n=r.current.comment.value;if(!x.rj.isInLengthRange(n,10,512))return void t("Комментарий не может быть короче 10 символов и длиннее 512 символов");let l=e.review._id,i=await fetch("/api/proxy/reviews/".concat(l,"/comments"),{method:"POST",body:JSON.stringify({author:s,text:n})}).then(e=>e.json());i.status||u.h.showError("Что то пошло не так: ".concat(i.message)),u.h.showSuccess("Комментарий добавлен"),e.onComment()}return(0,n.jsxs)("div",{className:"w-full h-auto flex flex-col gap-1",children:[(0,n.jsxs)("div",{className:"w-full h-auto px-6 py-4 flex flex-col gap-6",children:[(0,n.jsxs)("div",{className:"w-full grid grid-cols-[min-content_1fr_max-content] 1100:grid-cols-[max-content_1fr_max-content] grid-flow-col",children:[(0,n.jsx)("p",{className:"text-lg font-medium leading-7 w-fit 1100:w-[190px]",children:e.review.author}),(0,n.jsx)("div",{className:"w-full flex justify-center items-center",children:(0,n.jsx)("p",{className:"text-xs font-light text-gray",children:(0,x._U)(e.review.timestamp)})}),(0,n.jsx)("div",{className:"w-fit flex items-center",children:(0,n.jsx)(m.A,{name:"rating",defaultValue:e.review.rate,precision:.5,readOnly:!0})})]}),(0,n.jsx)("p",{className:"w-full h-fit mt-2 text-sm font-normal leading-6",children:e.review.text}),(0,n.jsxs)("div",{className:"flex gap-5",children:[(0,n.jsx)(f.A,{onClick:()=>{a(e=>!e)},src:g,width:20,height:20,alt:"icon-reply",className:"text-sm font-normal leading-[26px] text-gray",children:"Ответить"}),(0,n.jsx)(f.A,{onClick:()=>{s(e=>!e)},src:j,width:20,height:20,alt:"icon-comment",className:"text-sm font-normal leading-[26px] text-gray",children:"".concat(e.review.comments.length," ").concat(function(e){if(e>=5&&e<=20)return"комментариев";let t=e%10;return t>=5&&t<=9||0===t?"комментариев":t>=2&&t<=4?"комментария":1===t?"комментарий":void 0}(e.review.comments.length))})]})]}),(0,n.jsx)("div",{className:"w-full flex-col gap-2",style:{display:t?"flex":"none"},children:e.review.comments.map(e=>(0,n.jsxs)("div",{className:"w-full h-auto px-6 py-4 ml-6 flex flex-col gap-6 border-l-1 border-light-gray",children:[(0,n.jsxs)("div",{className:"w-full grid grid-cols-[max-content_1fr_max-content] grid-flow-col ",children:[(0,n.jsx)("p",{className:"text-lg font-medium leading-7 w-fit",children:e.author}),(0,n.jsx)("div",{className:"w-full flex justify-center items-center",children:(0,n.jsx)("p",{className:"text-xs font-light text-gray",children:(0,x._U)(e.timestamp)})})]}),(0,n.jsx)("p",{className:"w-full h-fit mt-2 text-sm font-normal leading-6",children:e.text})]},e._id))}),(0,n.jsxs)("div",{className:"w-full h-auto px-6 py-4 ml-6 flex-col gap-6 border-l-1 border-light-gray",style:{display:i?"flex":"none"},children:[(0,n.jsx)(h.A,{ref:e=>{r.current.name=e},className:"w-[270px]! text-sm h-fit!",placeholder:"Ваше имя"}),(0,n.jsx)("textarea",{ref:e=>{r.current.comment=e},className:"h-[140px] text-sm font-normal leading-6 placeholder:text-text-disable py-3 px-4 outline-none border-1 border-light-gray resize-none",placeholder:"Ваш комментарий"}),(0,n.jsx)(p.A,{onClick:c,children:"Отправить"})]})]})}let w={src:"/_next/static/media/icon-reload.dcfad07e.svg",height:20,width:21,blurWidth:0,blurHeight:0};function b(e){let[t,s]=(0,l.useState)([]),i=(0,l.useRef)({rate:null,name:null,email:null,comment:null});async function a(e){s(t=>[...t,...e])}async function r(){return fetch("/api/proxy/reviews?pid=".concat(e.pid)).then(e=>e.json())}async function c(){s([]),o()}async function o(){a(await r())}async function d(){var t,s,n;function l(e){u.h.showError(e)}let a=i.current.rate;if(!x.rj.isValidRating(a))return void l("Введите оценку товару");let r=null==(t=i.current.name)?void 0:t.value.trim();if(!r)return void l("Введите ваше имя");if(!x.rj.isRussianText(r))return void l("Имя может содержать только русские буквы");x.rj.isInLengthRange(r,3,32)||l("Имя не может быть короче 3 символов и длиннее 32 символов");let o=null==(s=i.current.email)?void 0:s.value;if(!o)return void u.h.showError("Введите ваш email");if(!x.rj.isValidEmail(o))return void l("Введенный вами email не валиден");let d=null==(n=i.current.comment)?void 0:n.value;if(!d)return void l("Комментарий не может быть пустым");if(!x.rj.isInLengthRange(d,20,1024))return void l("Комментарий не может быть короче 20 символов и длиннее 1024 символов");let m={rate:a,author:r,email:o,text:d,pid:e.pid},h=await fetch("/api/proxy/reviews",{method:"POST",body:JSON.stringify(m)}).then(e=>e.json());if(!h.status)return void u.h.showError("Что-то пошло не так при добавлении отзыва: ".concat(h.message));u.h.showSuccess("Отзыв оставлен"),c()}async function g(){var s;let n=null==(s=t.at(-1))?void 0:s._id;if(void 0===n)return;let l=await fetch("/api/proxy/reviews?pid=".concat(e.pid,"&lastId=").concat(n)).then(e=>e.json());Array.isArray(l)&&a(l)}return(0,l.useEffect)(()=>{o()},[]),(0,n.jsxs)("div",{className:"w-full h-auto grid grid-cols-1 750:grid-cols-[1fr_350px] 1100:grid-cols-[1fr_400px] gap-x-2 1100:gap-x-[30px]".concat(e.className?" "+e.className:""),children:[(0,n.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[t.map(e=>(0,n.jsx)(v,{onComment:c,review:e},e._id)),t.length%3==0&&0!==t.length?(0,n.jsx)("div",{className:"w-full flex items-center justify-center",onClick:g,children:(0,n.jsx)(f.A,{src:w,width:20,height:20,alt:"icon-reload",className:"text-sm 600:text-base",children:"Показать еще"})}):""]}),(0,n.jsxs)("div",{className:"w-full h-auto flex flex-col gap-4 py-6 px-[21px]",children:[(0,n.jsxs)("div",{className:"w-full h-fit flex flex-col gap-2",children:[(0,n.jsx)("p",{className:"text-sm font-medium",children:"Ваша оценка"}),(0,n.jsx)("div",{className:"max-w-[124px]",children:(0,n.jsx)(m.A,{onChange:(e,t)=>{i.current.rate=t},precision:.5})})]}),(0,n.jsxs)("div",{className:"w-full h-fit flex flex-col gap-2",children:[(0,n.jsx)("p",{className:"text-sm font-medium",children:"Ваше имя"}),(0,n.jsx)(h.A,{ref:e=>{i.current.name=e},className:"text-sm font-normal leading-6 placeholder:text-text-disable py-3! px-4!",placeholder:"Введите Ваше имя"})]}),(0,n.jsxs)("div",{className:"w-full h-fit flex flex-col gap-2",children:[(0,n.jsx)("p",{className:"text-sm font-medium",children:"Ваш Email"}),(0,n.jsx)(h.A,{ref:e=>{i.current.email=e},className:"text-sm font-normal leading-6 placeholder:text-text-disable py-3! px-4!",placeholder:"Введите Ваш Email"})]}),(0,n.jsxs)("div",{className:"w-full h-fit flex flex-col gap-2",children:[(0,n.jsx)("p",{className:"text-sm font-medium",children:"Ваш комментарий"}),(0,n.jsx)("textarea",{ref:e=>{i.current.comment=e},className:"h-[140px] text-sm font-normal leading-6 placeholder:text-text-disable py-3 px-4 outline-none border-1 border-light-gray resize-none",placeholder:"Введите ваш комментарий"})]}),(0,n.jsx)(p.A,{onClick:d,className:"w-full py-4!",children:"Оставить отзыв"})]})]})}function N(e){let[t,s]=(0,l.useState)(0),a=(0,l.useRef)([null,null,null]);return(0,n.jsxs)("div",{className:"mt-10 w-full h-auto px-4 930:px-25 flex flex-col gap-6",children:[(0,n.jsx)("div",{className:"flex flex-col gap-3",children:(0,n.jsxs)("div",{className:"flex gap-4 600:gap-[62px]",children:[(0,n.jsx)("p",{onClick:()=>{s(0)},ref:e=>{a.current[0]=e},style:{borderBottom:"2px solid ".concat(0===t?"#4295E4":"transparent")},className:"select-none text-base 600:text-xl font-medium leading-[26px] 600:leading-[30px] cursor-pointer transition-all duration-[250ms] linear",children:"Характеристики"}),(0,n.jsx)("p",{onClick:()=>{s(1)},ref:e=>{a.current[1]=e},style:{borderBottom:"2px solid ".concat(1===t?"#4295E4":"transparent")},className:"select-none text-base 600:text-xl font-medium leading-[26px] 600:leading-[30px] cursor-pointer transition-all duration-[250ms] linear",children:"Описание"}),(0,n.jsx)("p",{onClick:()=>{s(2)},ref:e=>{a.current[2]=e},style:{borderBottom:"2px solid ".concat(2===t?"#4295E4":"transparent")},className:"select-none text-base 600:text-xl font-medium leading-[26px] 600:leading-[30px] cursor-pointer transition-all duration-[250ms] linear",children:"Отзывы"})]})}),(0,n.jsxs)("div",{className:"w-full h-auto",children:[(0,n.jsx)(i,{className:"".concat(0===t?"":"hidden"),properties:e.product.properties}),(0,n.jsx)(d,{className:"".concat(1===t?"":"hidden"),description:e.product.description,img:e.product.poster}),(0,n.jsx)(b,{className:"".concat(2===t?"":"hidden"),pid:e.product._id})]})]})}}},e=>{e.O(0,[356,481,276,139,397,984,441,255,358],()=>e(e.s=5582)),_N_E=e.O()}]);